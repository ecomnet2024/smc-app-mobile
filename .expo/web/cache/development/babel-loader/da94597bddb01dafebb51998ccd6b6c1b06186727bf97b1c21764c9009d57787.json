{"ast":null,"code":"var _jsxFileName = \"/home/newuser/Desktop/tutoo flutter/smc-app-mobile/src/Screens/HomeScreen.js\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport React, { useEffect, useContext, useRef } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { GestureHandlerRootView, TouchableOpacity, TextInput, ScrollView } from 'react-native-gesture-handler';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useNavigation } from '@react-navigation/native';\nimport { useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { AntDesign } from '@expo/vector-icons';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Entypo from '@expo/vector-icons/Entypo';\nimport Testconsult from '../../Components/testconsult';\nimport { GET_CONSULTATION, GET_USER } from '../../src/Screens/graphql/Queries';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useQuery } from '@apollo/client';\nimport * as ImagePicker from 'expo-image-picker';\nimport { jwtDecode } from 'jwt-decode';\nimport { useMutation } from '@apollo/client';\nimport { USER_UPDATE_PICTURE } from '../../src/Screens/graphql/Mutation';\nimport SessionContext from '../../Components/SessionProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomeScreen = () => {\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(GET_CONSULTATION);\n  const navigation = useNavigation();\n  const [userName, setUserName] = useState('');\n  const {\n    handleLogout\n  } = useContext(SessionContext);\n  const [profileImage, setProfileImage] = useState(require('../assets/images-user.png'));\n  const [updateUser] = useMutation(USER_UPDATE_PICTURE);\n  const [userId, setUserId] = useState(null);\n  const [showScrollToTop, setShowScrollToTop] = useState(false);\n  const scrollViewRef = useRef(null);\n  useEffect(() => {\n    const fetchUserName = async () => {\n      try {\n        const token = await AsyncStorage.getItem('userToken');\n        if (token) {\n          const decodedToken = jwtDecode(token);\n          console.log(\"token decode\", decodedToken);\n          setUserName(decodedToken.name || 'User');\n        }\n      } catch (error) {\n        console.error(\"Error decoding token:\", error);\n        setUserName('User');\n      }\n    };\n    fetchUserName();\n  }, []);\n  const getUserIdFromToken = async () => {\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (token) {\n        const decodedToken = jwtDecode(token);\n        return decodedToken.user_id;\n      }\n    } catch (error) {\n      console.error('Error decoding token:', error);\n      return null;\n    }\n  };\n  useEffect(() => {\n    const fetchUserId = async () => {\n      const id = await getUserIdFromToken();\n      if (id) {\n        setUserId(id);\n      }\n    };\n    fetchUserId();\n  }, []);\n  const {\n    data: userData,\n    loading: userLoading,\n    error: userError\n  } = useQuery(GET_USER, {\n    variables: {\n      id: userId\n    },\n    skip: !userId\n  });\n  useEffect(() => {\n    if (userData?.userById?.image) {\n      setProfileImage({\n        uri: userData.userById.image\n      });\n    }\n  }, [userData]);\n  const uploadImageToCloudinary = async uri => {\n    const data = new FormData();\n    data.append('file', {\n      uri,\n      name: 'profile_image.jpg',\n      type: 'image/jpeg'\n    });\n    data.append('upload_preset', 'my_preset');\n    data.append('cloud_name', 'djovqbxfl');\n    const response = await fetch('https://api.cloudinary.com/v1_1/djovqbxfl/image/upload', {\n      method: 'POST',\n      body: data\n    });\n    const result = await response.json();\n    return result.secure_url;\n  };\n  const handleProfileImagePress = async () => {\n    const options = [{\n      text: 'Take a Photo',\n      onPress: () => pickImage('camera')\n    }, {\n      text: 'Choose from Gallery',\n      onPress: () => pickImage('gallery')\n    }, {\n      text: 'Cancel',\n      style: 'cancel'\n    }];\n    Alert.alert('Profile Picture', 'Choose an option', options);\n  };\n  const pickImage = async source => {\n    try {\n      let result;\n      if (source === 'camera') {\n        result = await ImagePicker.launchCameraAsync({\n          allowsEditing: true,\n          quality: 1\n        });\n      } else {\n        result = await ImagePicker.launchImageLibraryAsync({\n          allowsEditing: true,\n          quality: 1\n        });\n      }\n      if (!result.canceled) {\n        const {\n          uri\n        } = result.assets[0];\n        setProfileImage({\n          uri\n        });\n        console.log('Image sélectionnée avec succès:', uri);\n        const cloudinaryUrl = await uploadImageToCloudinary(uri);\n        console.log('Image uploadée sur Cloudinary:', cloudinaryUrl);\n        const userId = await getUserIdFromToken();\n        if (userId) {\n          await updateUser({\n            variables: {\n              id: userId,\n              record: {\n                image: cloudinaryUrl\n              }\n            }\n          });\n          console.log('Utilisateur mis à jour avec succès');\n        }\n      }\n    } catch (error) {\n      console.error('Erreur lors du traitement de l’image:', error);\n    }\n  };\n  useEffect(() => {\n    const interval = setInterval(() => {\n      refetch();\n      console.log('Data refreshed automatically');\n    }, 70000);\n    return () => clearInterval(interval);\n  }, [refetch]);\n  useFocusEffect(React.useCallback(() => {\n    refetch();\n    console.log('Data refreshed on focus');\n  }, [refetch]));\n  const [userEmail, setUserEmail] = useState('');\n  useEffect(() => {\n    const fetchUserEmail = async () => {\n      const storedEmail = await AsyncStorage.getItem('userEmail');\n      if (storedEmail) {\n        setUserEmail(storedEmail);\n      }\n    };\n    fetchUserEmail();\n  }, []);\n  const handleScroll = event => {\n    const currentOffset = event.nativeEvent.contentOffset.y;\n    setShowScrollToTop(currentOffset > 100);\n  };\n  const scrollToTop = () => {\n    scrollViewRef.current?.scrollTo({\n      y: 0,\n      animated: true\n    });\n  };\n  const handleNewConsultation = () => {\n    navigation.navigate(\"NewPatient\");\n  };\n  const handleEmergency = () => {\n    navigation.navigate(\"Emergency\");\n  };\n  if (loading) {\n    return _jsxDEV(SafeAreaView, {\n      style: styles.container,\n      children: _jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#3C58C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return _jsxDEV(SafeAreaView, {\n      children: _jsxDEV(Text, {\n        children: [\"Error: \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 12\n    }, this);\n  }\n  if (userLoading) {\n    return _jsxDEV(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#3C58C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 5\n      }, this), _jsxDEV(Text, {\n        children: \"Loading user data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 12\n    }, this);\n  }\n  if (userError) {\n    console.error('Error fetching user data:', userError);\n    return _jsxDEV(Text, {\n      children: \"Error loading user data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 12\n    }, this);\n  }\n  return _jsxDEV(GestureHandlerRootView, {\n    children: _jsxDEV(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxDEV(ScrollView, {\n        ref: scrollViewRef,\n        onScroll: handleScroll,\n        scrollEventThrottle: 16,\n        children: [_jsxDEV(View, {\n          children: [_jsxDEV(Image, {\n            source: require('../assets/top2.png'),\n            style: [styles.backgroundImage, styles.image1]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 7\n          }, this), _jsxDEV(Image, {\n            source: require('../assets/bottom2.png'),\n            style: [styles.backgroundImage, styles.image2]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 7\n          }, this), _jsxDEV(Image, {\n            source: require('../assets/bottom1.png'),\n            style: [styles.backgroundImage, styles.image3]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 7\n          }, this), _jsxDEV(View, {\n            style: styles.banner,\n            children: [_jsxDEV(View, {\n              style: styles.topRow,\n              children: [_jsxDEV(Image, {\n                source: require('../assets/Group 13.png'),\n                style: styles.logo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 11\n              }, this), _jsxDEV(View, {\n                style: styles.centerRow,\n                children: [_jsxDEV(TouchableOpacity, {\n                  onPress: handleProfileImagePress,\n                  children: _jsxDEV(Image, {\n                    source: profileImage,\n                    style: styles.profileImage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 11\n                }, this), _jsxDEV(TouchableOpacity, {\n                  style: styles.logoutButton,\n                  onPress: handleLogout,\n                  children: [_jsxDEV(Entypo, {\n                    name: \"log-out\",\n                    size: 24,\n                    color: \"white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 13\n                  }, this), _jsxDEV(Text, {\n                    style: styles.logoutButtonText,\n                    children: \"Logout\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 15\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 9\n            }, this), _jsxDEV(View, {\n              style: styles.middleRow,\n              children: _jsxDEV(View, {\n                style: styles.centerRow,\n                children: _jsxDEV(Text, {\n                  style: styles.email,\n                  children: [\"  Hello,\", \"\\n\", userName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 10\n            }, this), _jsxDEV(Text, {\n              style: styles.welcomeText,\n              children: \"Welcome back!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 7\n        }, this), _jsxDEV(Text, {\n          style: styles.title,\n          children: \" create new folder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 7\n        }, this), _jsxDEV(View, {\n          style: styles.buttonContainer,\n          children: [_jsxDEV(TouchableOpacity, {\n            style: styles.button,\n            onPress: handleNewConsultation,\n            children: [_jsxDEV(Image, {\n              source: require('../assets/undraw_medicine_b1ol.png'),\n              style: styles.logo3\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 9\n            }, this), _jsxDEV(Text, {\n              style: styles.buttonText2,\n              children: \"New consultation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 9\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: styles.button,\n            onPress: handleEmergency,\n            children: [_jsxDEV(Image, {\n              source: require('../assets/emergency.png'),\n              style: styles.logo2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 9\n            }, this), _jsxDEV(Text, {\n              style: styles.buttonText2,\n              children: \"Emergency\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 9\n        }, this), _jsxDEV(View, {\n          style: styles.textContainer,\n          children: _jsxDEV(Text, {\n            style: styles.title,\n            children: \" recent consultations \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 8\n        }, this), _jsxDEV(Testconsult, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 5\n      }, this), showScrollToTop && _jsxDEV(TouchableOpacity, {\n        style: styles.scrollToTopButton,\n        onPress: scrollToTop,\n        children: _jsxDEV(AntDesign, {\n          name: \"arrowup\",\n          size: 24,\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n};\nexport default HomeScreen;\nconst styles = StyleSheet.create({\n  scrollContainer: {\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  scrollToTopButton: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    backgroundColor: '#3C58C1',\n    borderRadius: 50,\n    padding: 15,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 3,\n    elevation: 5\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    paddingHorizontal: 8,\n    backgroundColor: '#fff',\n    marginVertical: 5\n  },\n  textContainer: {\n    alignItems: 'flex-start',\n    marginVertical: 15\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginVertical: 8\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  button: {\n    width: 150,\n    height: 150,\n    backgroundColor: '#fff',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 16,\n    marginHorizontal: 5\n  },\n  buttonText2: {\n    color: '#000000',\n    fontWeight: 'semibold'\n  },\n  banner: {\n    backgroundColor: '#3C58C1',\n    padding: 11,\n    borderRadius: 15,\n    marginVertical: 5\n  },\n  topRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: -2\n  },\n  middleRow: {\n    flexDirection: 'row',\n    alignItems: '',\n    justifyContent: 'space-between',\n    marginBottom: 8\n  },\n  logo: {\n    width: 85,\n    height: 85,\n    resizeMode: 'contain'\n  },\n  logo2: {\n    width: 96,\n    height: 100,\n    resizeMode: 'contain'\n  },\n  logo3: {\n    width: 140,\n    height: 140,\n    resizeMode: 'contain'\n  },\n  centerRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center'\n  },\n  menuIcon: {\n    marginRight: 12,\n    width: 25,\n    height: 25\n  },\n  email: {\n    fontSize: 14,\n    color: '#fff'\n  },\n  profileImage: {\n    width: 48,\n    height: 48,\n    borderRadius: 25,\n    marginLeft: 125,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    backgroundColor: '#f0f0f0'\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    borderRadius: 20,\n    padding: 7,\n    marginBottom: 6\n  },\n  searchInput: {\n    flex: 1,\n    marginLeft: 10,\n    fontSize: 16\n  },\n  welcomeText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    color: '#ffffff'\n  },\n  logoutButton: {\n    padding: 5,\n    borderRadius: 5,\n    alignItems: 'center',\n    marginLeft: 10\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontWeight: 'bold',\n    fontSize: 12\n  },\n  backgroundImage: {\n    position: 'absolute',\n    width: 350,\n    height: 350,\n    zIndex: -1\n  },\n  image1: {\n    top: -5,\n    left: 8\n  },\n  image2: {\n    top: 450,\n    right: -15,\n    width: 350\n  },\n  image3: {\n    top: 390,\n    right: -5\n  }\n});","map":{"version":3,"names":["React","useEffect","useContext","useRef","SafeAreaView","GestureHandlerRootView","TouchableOpacity","TextInput","ScrollView","Image","ActivityIndicator","useNavigation","useState","Animated","AntDesign","Alert","AsyncStorage","Entypo","Testconsult","GET_CONSULTATION","GET_USER","useFocusEffect","useQuery","ImagePicker","jwtDecode","useMutation","USER_UPDATE_PICTURE","SessionContext","jsxDEV","_jsxDEV","HomeScreen","loading","error","data","refetch","navigation","userName","setUserName","handleLogout","profileImage","setProfileImage","require","updateUser","userId","setUserId","showScrollToTop","setShowScrollToTop","scrollViewRef","fetchUserName","token","getItem","decodedToken","console","log","name","getUserIdFromToken","user_id","fetchUserId","id","userData","userLoading","userError","variables","skip","userById","image","uri","uploadImageToCloudinary","FormData","append","type","response","fetch","method","body","result","json","secure_url","handleProfileImagePress","options","text","onPress","pickImage","style","alert","source","launchCameraAsync","allowsEditing","quality","launchImageLibraryAsync","canceled","assets","cloudinaryUrl","record","interval","setInterval","clearInterval","useCallback","userEmail","setUserEmail","fetchUserEmail","storedEmail","handleScroll","event","currentOffset","nativeEvent","contentOffset","y","scrollToTop","current","scrollTo","animated","handleNewConsultation","navigate","handleEmergency","styles","container","children","size","color","fileName","_jsxFileName","lineNumber","columnNumber","Text","message","ref","onScroll","scrollEventThrottle","View","backgroundImage","image1","image2","image3","banner","topRow","logo","centerRow","logoutButton","logoutButtonText","middleRow","email","welcomeText","title","buttonContainer","button","logo3","buttonText2","logo2","textContainer","scrollToTopButton","StyleSheet","create","scrollContainer","justifyContent","backgroundColor","position","bottom","right","borderRadius","padding","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","flex","paddingHorizontal","marginVertical","alignItems","fontSize","fontWeight","flexDirection","marginHorizontal","marginBottom","resizeMode","menuIcon","marginRight","marginLeft","borderWidth","borderColor","searchContainer","searchInput","textAlign","zIndex","top","left"],"sources":["/home/newuser/Desktop/tutoo flutter/smc-app-mobile/src/Screens/HomeScreen.js"],"sourcesContent":["import { StyleSheet, Text, View, Button } from 'react-native'\nimport React,  { useEffect, useContext, useRef }  from 'react'\nimport { SafeAreaView } from 'react-native-safe-area-context'\nimport { GestureHandlerRootView, TouchableOpacity, TextInput, ScrollView } from 'react-native-gesture-handler'\nimport { Image , ActivityIndicator} from 'react-native'\nimport { useNavigation } from '@react-navigation/native'\nimport { useState } from 'react'\nimport { Animated } from 'react-native';\nimport { AntDesign } from '@expo/vector-icons';\nimport { Alert } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Entypo from '@expo/vector-icons/Entypo';\nimport Testconsult from '../../Components/testconsult';\nimport { GET_CONSULTATION, GET_USER } from '../../src/Screens/graphql/Queries';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useQuery } from '@apollo/client';\nimport * as ImagePicker from 'expo-image-picker';\nimport { jwtDecode } from 'jwt-decode';\nimport { useMutation } from '@apollo/client';\nimport { USER_UPDATE_PICTURE } from '../../src/Screens/graphql/Mutation'; \nimport SessionContext from '../../Components/SessionProvider';\n\n\n\nconst HomeScreen = () => {\n\n  const { loading, error, data, refetch } = useQuery(GET_CONSULTATION);\n  const navigation = useNavigation();\n  const [userName, setUserName] = useState('');\n  const { handleLogout } = useContext(SessionContext); // Importe handleLogout depuis le contexte\n  const [profileImage, setProfileImage] = useState(require('../assets/images-user.png')); // Image par défaut\n  const [updateUser] = useMutation(USER_UPDATE_PICTURE); // Mutation GraphQL\n  const [userId, setUserId] = useState(null);\n  const [showScrollToTop, setShowScrollToTop] = useState(false); // État pour afficher le bouton\n  const scrollViewRef = useRef(null); // Référence à la ScrollView\n\n\n  useEffect(() => {\n    const fetchUserName = async () => {\n      try {\n        const token = await AsyncStorage.getItem('userToken');\n        if (token) {\n          const decodedToken = jwtDecode(token);\n          console.log(\"token decode\",decodedToken);\n          setUserName(decodedToken.name || 'User'); // Définit un nom par défaut si non trouvé\n        }\n      } catch (error) {\n        console.error(\"Error decoding token:\", error);\n        setUserName('User');\n      }\n    };\n    fetchUserName();\n  }, []);\n\n  const getUserIdFromToken = async () => {\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (token) {\n        const decodedToken = jwtDecode(token);\n        return decodedToken.user_id; // Assurez-vous que 'user_id' correspond bien à votre token\n      }\n    } catch (error) {\n      console.error('Error decoding token:', error);\n      return null;\n    }\n  };\n\n   // Récupérer l'ID utilisateur au chargement\n   useEffect(() => {\n    const fetchUserId = async () => {\n      const id = await getUserIdFromToken();\n      if (id) {\n        setUserId(id);\n      }\n    };\n    fetchUserId();\n  }, []);\n\n  // Requête pour récupérer les données utilisateur\n  const { data: userData, loading: userLoading, error: userError } = useQuery(GET_USER, {\n    variables: { id: userId },\n    skip: !userId, // Ne pas exécuter la requête tant que l'ID utilisateur n'est pas disponible\n  });\n\n  useEffect(() => {\n    if (userData?.userById?.image) {\n      setProfileImage({ uri: userData.userById.image }); // Met à jour l'image si elle existe\n    }\n  }, [userData]);\n\n\n  //-----------------------------------------------------------------------------------\n\n  const uploadImageToCloudinary = async (uri) => {\n    const data = new FormData();\n    data.append('file', {\n      uri,\n      name: 'profile_image.jpg',\n      type: 'image/jpeg',\n    });\n    data.append('upload_preset', 'my_preset');\n    data.append('cloud_name', 'djovqbxfl');\n  \n    const response = await fetch('https://api.cloudinary.com/v1_1/djovqbxfl/image/upload', {\n      method: 'POST',\n      body: data,\n    });\n    const result = await response.json();\n    return result.secure_url;\n  };\n  // Function to upload image to Cloudinary\n\n  //------------------------------------------------------------------------------------\n\n\n  // Gérer l'image de profil\n  const handleProfileImagePress = async () => {\n    const options = [\n      { text: 'Take a Photo', onPress: () => pickImage('camera') },\n      { text: 'Choose from Gallery', onPress: () => pickImage('gallery') },\n      { text: 'Cancel', style: 'cancel' },\n    ];\n    Alert.alert('Profile Picture', 'Choose an option', options);\n  };\n  const pickImage = async (source) => {\n    try {\n      let result;\n      if (source === 'camera') {\n        result = await ImagePicker.launchCameraAsync({ allowsEditing: true, quality: 1, });\n      } else {\n        result = await ImagePicker.launchImageLibraryAsync({ allowsEditing: true, quality: 1,  });\n      }\n      if (!result.canceled) {\n        const { uri } = result.assets[0];\n        setProfileImage({ uri }); // Mise à jour de l'image affichée\n\n        console.log('Image sélectionnée avec succès:', uri);\n        // Upload vers Cloudinary\n        const cloudinaryUrl = await uploadImageToCloudinary(uri);\n        console.log('Image uploadée sur Cloudinary:', cloudinaryUrl);\n        // Mise à jour de l'utilisateur via GraphQL\n        const userId = await getUserIdFromToken(); // ID de l'utilisateur\n        if (userId) {\n          await updateUser({\n            variables: {\n              id: userId,\n              record: { image: cloudinaryUrl },\n            },\n          });\n          console.log('Utilisateur mis à jour avec succès');\n        }\n      }\n    } catch (error) {\n      console.error('Erreur lors du traitement de l’image:', error);\n    }\n  };\n\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      refetch(); // Rafraîchir automatiquement toutes les 60 secondes\n      console.log('Data refreshed automatically');\n    }, 70000);\n  \n    return () => clearInterval(interval); // Nettoyer l'intervalle\n  }, [refetch]);\n  \n  useFocusEffect(\n    React.useCallback(() => {\n      refetch(); // Rafraîchir les données à chaque fois que la page est affichée\n      console.log('Data refreshed on focus');\n    }, [refetch])\n  );\n\n\n  const [userEmail, setUserEmail] = useState('');\n  useEffect(() => {\n    const fetchUserEmail = async () => {\n      const storedEmail = await AsyncStorage.getItem('userEmail');\n      if (storedEmail) {\n        setUserEmail(storedEmail);\n      }\n    };\n    fetchUserEmail();\n  }, []);\n\n // Gestion de l'affichage du bouton lors du défilement\n const handleScroll = (event) => {\n  const currentOffset = event.nativeEvent.contentOffset.y;\n  setShowScrollToTop(currentOffset > 100); // Affiche le bouton si on a défilé de plus de 100px\n};\n// Fonction pour revenir en haut\nconst scrollToTop = () => {\n  scrollViewRef.current?.scrollTo({ y: 0, animated: true });\n};\n\n\n  const handleNewConsultation=()=>{\n     navigation.navigate(\"NewPatient\");\n  }\n  const handleEmergency=()=>{\n    navigation.navigate(\"Emergency\");\n }\n  if (loading) {\n    return <SafeAreaView style={styles.container}>\n    <ActivityIndicator size=\"large\" color=\"#3C58C1\" />\n    </SafeAreaView>;\n  }\n  if (error) {\n    return <SafeAreaView><Text>Error: {error.message}</Text></SafeAreaView>;\n  }\n  if (userLoading) {\n    return <SafeAreaView style={styles.container}>\n    <ActivityIndicator size=\"large\" color=\"#3C58C1\" />\n    <Text>Loading user data...</Text>\n    </SafeAreaView>;\n  }\n  if (userError) {\n    console.error('Error fetching user data:', userError);\n    return <Text>Error loading user data</Text>;\n  }\n\n\n  return (\n    <GestureHandlerRootView>\n    <SafeAreaView style={styles.container}>\n    <ScrollView\n     ref={scrollViewRef}\n     onScroll={handleScroll}\n     scrollEventThrottle={16} >\n\n      <View>\n\n         {/* Images en arrière-plan */}\n      <Image\n        source={require('../assets/top2.png')} \n        style={[styles.backgroundImage, styles.image1]}\n      />\n      <Image\n        source={require('../assets/bottom2.png')} \n        style={[styles.backgroundImage, styles.image2]}\n      />\n      <Image\n        source={require('../assets/bottom1.png')} \n        style={[styles.backgroundImage, styles.image3]}\n      />\n  \n      {/* Bannière */}\n      <View style={styles.banner}>\n        {/* Ligne 1 - Logo*/}\n        <View style={styles.topRow}>\n          <Image source={require('../assets/Group 13.png')} style={styles.logo} />\n          <View style={styles.centerRow}>\n\n          <TouchableOpacity onPress={handleProfileImagePress}>\n          <Image source={profileImage} style={styles.profileImage} />\n            </TouchableOpacity>\n\n            <TouchableOpacity style={styles.logoutButton} onPress={handleLogout}>\n            <Entypo name=\"log-out\" size={24} color=\"white\" />\n              <Text style={styles.logoutButtonText}>Logout</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n\n\n         {/* Ligne 2 - Profil */}\n         <View style={styles.middleRow}>\n    \n          <View style={styles.centerRow}>\n          {/* <Ionicons name=\"menu\" size={30} color=\"white\" style={styles.menuIcon} /> */}\n            <Text style={styles.email}>  Hello,{\"\\n\"}{userName}</Text>\n          </View>\n        </View>\n\n        {/* Barre de recherche */}\n        \n        {/* Texte de bienvenue */}\n        <Text style={styles.welcomeText}>Welcome back!</Text>\n      </View>\n    </View>\n  \n\n      <Text style={styles.title}> create new folder</Text>\n\n        <View style={styles.buttonContainer}>\n        <TouchableOpacity style= {styles.button} onPress={handleNewConsultation}>\n        <Image source={require('../assets/undraw_medicine_b1ol.png')} style={styles.logo3} />\n          <Text style={styles.buttonText2}>New consultation</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity style= {styles.button} onPress={handleEmergency}>\n        <Image source={require('../assets/emergency.png')} style={styles.logo2} />\n          <Text style={styles.buttonText2}>Emergency</Text>\n        </TouchableOpacity>\n       </View>\n\n       <View style={styles.textContainer}>\n       <Text style={styles.title}> recent consultations </Text>\n       </View>\n\n       <Testconsult />\n\n       </ScrollView>\n\n       {/* Bouton pour remonter en haut */}\n       {showScrollToTop && (\n          <TouchableOpacity\n            style={styles.scrollToTopButton}\n            onPress={scrollToTop}\n          >\n            <AntDesign name=\"arrowup\" size={24} color=\"white\" />\n          </TouchableOpacity>\n        )}\n\n    </SafeAreaView>\n    </GestureHandlerRootView>\n  )\n}\n\n\nexport default HomeScreen\n\nconst styles = StyleSheet.create({\n  scrollContainer: {\n   // flexGrow: 1, // Permet à ScrollView de s'étendre pour tout le contenu\n    justifyContent: 'center',\n    backgroundColor: '#fff',\n  },\n  scrollToTopButton: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    backgroundColor: '#3C58C1',\n    borderRadius: 50,\n    padding: 15,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 3,\n    elevation: 5,\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    paddingHorizontal: 8,\n    backgroundColor: '#fff',\n    marginVertical:5,\n\n  },\n  textContainer: {\n    alignItems:'flex-start',\n    marginVertical:15,\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginVertical: 8,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  button: {\n    width: 150,\n    height: 150,\n    backgroundColor: '#fff',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 16,\n    marginHorizontal:5 ,\n  },\n  buttonText2:{\n    color:'#000000',\n    fontWeight:'semibold',\n  },\n  banner: {\n    backgroundColor: '#3C58C1',\n    padding: 11,\n    borderRadius: 15,\n    marginVertical:5,\n  },\n  topRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: -2,\n  },\n  middleRow: {\n    flexDirection: 'row',\n    alignItems: '',\n    justifyContent: 'space-between',\n    marginBottom: 8,\n  },\n  logo: {\n    width: 85,\n    height: 85,\n    resizeMode: 'contain',\n  },\n  logo2: {\n    width: 96,\n    height: 100,\n    resizeMode: 'contain',\n  },\n  logo3: {\n    width: 140,\n    height: 140,\n    resizeMode: 'contain',\n  },\n  centerRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center',\n  },\n  menuIcon: {\n    marginRight: 12,\n    width:25,\n    height:25,\n  },\n  email: {\n    fontSize: 14,\n    color: '#fff',\n  },\n  profileImage: {\n    width: 48,\n    height: 48,\n    borderRadius: 25,\n    marginLeft: 125,\n    borderWidth: 1,\n    borderColor: '#ccc', // Optionnel : ajout d'une bordure\n    backgroundColor: '#f0f0f0', // Couleur de fond par défaut si l'image ne charge pas\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    borderRadius: 20,\n    padding: 7,\n    marginBottom: 6,\n  },\n  searchInput: {\n    flex: 1,\n    marginLeft: 10,\n    fontSize: 16,\n  },\n  welcomeText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    color: '#ffffff',\n  },\n  logoutButton: {\n    padding: 5,\n    borderRadius: 5,\n    alignItems: 'center',\n    marginLeft: 10,\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontWeight: 'bold',\n    fontSize: 12,\n  },\n  backgroundImage: {\n    position: 'absolute',\n    width: 350,  // Largeur de l'image\n    height: 350, // Hauteur de l'image\n    zIndex: -1,  // Met les images derrière le contenu\n  },\n  image1: {\n    top: -5,\n    left: 8,\n  },\n  image2: {\n    top: 450,\n    right: -15,\n    width: 350,  // Largeur de l'image\n  },\n  image3: {\n    top: 390,\n    right: -5,\n  },\n\n})"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}